---
- name: Introduction aux variables
  hosts: srv1

  tasks:
    - name: Inclusion d'un fichier de variables
      include_vars:
        file: testvars.yml

    - name: Utilisation d'une variable scalaire
      debug:
        msg: "Stage: {{ stage }}"

    - name: Utilisation d'une variable de liste
      debug:
        msg: "Liste des stagiaires: {{ stagiaires }}"

    - name: Accès à un élément d'une liste
      debug:
        msg: "Premier stagiaire: {{ stagiaires[0] }}"

    - name: Utilisation d'une variable tableau associatif
      debug:
        msg: "Formation: {{ formation }}"

    - name: Accès à une clé d'un tableau associatif
      debug:
        msg: "Intitulé: {{ formation.intitulé }}"

    - name: Accès à une structure de donnée complexe -> Afficher le login de curt
      debug:
        msg: "Login n°2: {{ users[1].login }}"

    - name: Recours à une extra-variable
      debug:
        msg: "nb1: {{ nb1|default(10) }}"

    - name: Recours à une extra-variable
      debug:
        msg: "nb2: {{ nb2|default(10) }}"

    - name: Autre filtre
      debug:
        msg: "Formation: {{ formation.intitulé|upper }}"
